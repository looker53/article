**编写高效测试用例，注意这 12 条规范**



编写高效的测试用例很难。 部分测试工程师编写的用例脆弱、混乱、运行效果低下，这样的用例弊大于利。 编写良好的用例综合的原则是遵循AAA 模式（Arrange Act Assert），先安排用例结构和数据，再定义测试步骤，最后设计好断言。 除此以外，你还可以注意以下这些问题：



1. 用例独立

每个测试用例都应该与所有其他用例无关，这意味着测试人员每次都能独立运行每一个用例。测试用例应该设置合适的 setUp 和 tearDown 清理程序，保证用例正常运行的同时不会产生任何的造数据和副作用。为每个测试提前设置需要的数据和资源（Arrange）。自动化测试程序应该使用依赖注入模式而不是全局变量。如果一个测试失败，其他测试仍应成功运行。测试用例独立并且可扩展，是并行运行的前提条件。



现在主流的测试框架基本上都支持测试用例独立性设置（setup 和 teardown）。然而，还是有很多自动化测试人员以依赖用例为荣，他们认为一个用例结束刚好可以得到下一个用例需要的数据，更能提升测试效率。不要写这样的测试！用例依赖会让你的自动化程序变得非常难维护，当其中一个用例执行失败会导致你接下来的用例全部爆红，你根本不知道是因为有 bug 还是自己哪一行代码的问题。 而且，用例如果有依赖，意味着你不能随便更改用例的执行速度，并发执行会变得异常困难，怎么提升测试的运行效率？



1. 快速反馈

你知道为什么软件需要测试吗? 为了找更多的 bug? 还是为了保证软件的质量？ 我们为什么不开发完了，直接上线，然后等待用户直接给我们反馈 bug 和问题？



所有的测试工作，都是为了更快速的得到反馈。快速反馈帮助团队提前捕获问题，控制软件开发的风险。快速反馈必须要有快速测试，慢速测试会导致慢速反馈，从而迫使团队压缩测试的覆盖范围。我们花了那么多金钱和精力，搭建非常大的测试团队，最终就因为测试的速度、反馈的速度不够快，反而增加了软件系统的风险。



现在提倡的持续测试、持续交付流程，最终最大的效果就是要得到快速反馈， 很多团队花了很多心思在各种工具和框架的摸索和调研中，最终和快速反馈越来越远。



还有一个需要注意的问题是，快速反馈和自动化测试没有必然联系。 自动化测试确实能快速执行，重复执行，但是不一定能快速获取反馈。 有的自动化测试程序一旦爆红，花了大量精力和时间才确定故障原因是自身代码问题，这和快速反馈的原则是背道而驰的。



为了保证快速反馈，测试过程需要注意几个问题：

1. 保证用例稳定性和独立性，减少用例依赖，减少外部依赖，清理用例数据和环境，
2. 提升运行效率。 多覆盖原子性行为和单功能行为，多覆盖 API 测试减少端对端测试，设置并发运行，持续集成，快速反馈。





地址：https://automationpanda.com/2020/07/09/12-traits-of-highly-effective-tests/